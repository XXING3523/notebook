<span style="color: orange;">**【树状数组】CF2129B **</span>

【题目大意】给定大小为$n$的排列$P=\left \{ p_1,p_2,\cdots,p_n \right \} $，对排列$A=\left \{  a_1,a_2,\cdots,a_n\right \} $，$a_i$可取$p_i$或$2n-p_i$，求$A$的一个合理构造，使$A$中逆序对数量最少。

<span style="color: orange;">**【树状数组】P1774 **</span>

【题目大意】对序列$A=\left \{  a_1,a_2,\cdots,a_n\right \} $，记交换相邻元素为一次操作，求使该序列变为不下降子序列的最小操作数。

树状数组的单点修改，单点查询，区间修改，区间查询。





树状数组对于”单点修改，区间查询“与”区间修改、单点查询“非常方便。



???success "<span style="color: orange;">**【单点修改，区间查询】LuoguP3374 树状数组1 **</span>参考解答"
	```
	#include<bits/stdc++.h>
    using namespace std;
    const int N=1e6+5;
    int n,q;
    long long t[N];
    void add(int x,int k)
    {
        while(x<=n) t[x]+=k,x+=x&(-x);
    }
    long long query(int x)
    {
        long long ans=0;
        while(x) ans+=t[x],x-=x&(-x);
        return ans;
    }
    int main()
    {
        cin>>n>>q;
        int op,x,y;
        for(int i=1;i<=n;i++)
            cin>>x,add(i,x);
        for(int i=1;i<=q;i++)
        {
            cin>>op>>x>>y;
            if(op==1) add(x,y);
            else cout<<query(y)-query(x-1)<<endl;
        }
        return 0;
    }
	```


???success "<span style="color: orange;">**【区间修改，单点查询】LuoguP3368 树状数组2 **</span>参考解答"
	```
	#include<bits/stdc++.h>
    using namespace std;
    const int N=1e6+5;
    int n,a[N],t[N],q;
    void add(int x,long long k)
    {
        while(x<=n) t[x]+=k,x+=x&(-x);
    }
    long long query(int x)
    {
        long long res=0;
        while(x) res+=t[x],x-=x&(-x);
        return res;
    }
    int main()
    {
        scanf("%d%d",&n,&q);
        for(int i=1;i<=n;i++) scanf("%d",&a[i]);
        for(int i=1;i<=n;i++) add(i,a[i]-a[i-1]);
        for(int i=1;i<=q;i++)
        {
            int op,l,r,x;
            scanf("%d",&op);
            if(op==1)
            {
                scanf("%d%d%d",&l,&r,&x);
                add(l,x),add(r+1,-x);
            }
            else
            {
                scanf("%d",&x);
                printf("%d\n",query(x));
            }
        }
        return 0;
    }
	```

