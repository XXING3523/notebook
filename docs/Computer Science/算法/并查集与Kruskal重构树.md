并查集

<span style="color: #76EE00;">**【二分】【种类并查集】LuoguP1525**</span>

**【题目大意】**将$N$号人划分为2个集团，存在对敌对关系，每对关系包含三个信息，表示若划分到同一集团，将产生分数，对全体合理的划分方案，求产生分数最大值的最小值（若上述关系均未触发，结果为0）

答案的求解满足二分的求解要求，故将其转化为判断合法性问题。

将关系按降序排序，并只关注大于等于mid的部分，要求此部分不触发任何关系。对于二元种类并查集，若要使$(a,b),(b,c)$不触发关系，则$a,c$必划分到同一集团。即若要使$(a,b)$不触发关系，则必将$a$与$b$的所有敌人划分到同一集团。

此处并查集将扩充1倍，后$N$个元素表示对应敌人，对某关系$(a_j,b_j,c_j)$，有$Union(a_j,b_j+N),Union(b_j,a_j+N)$

<span style="color: #76EE00;">**【种类并查集】LuoguP2024**</span>

<span style="color: #76EE00;">**【离散化】【种类并查集】LuoguP1955**</span>



Kruskal重构树

在利用Kruskal算法求解某个图最小生成树的过程中，将待加入的边记为一个新结点，其点权为此边的边权，且此边连接的两个儿子为结点的左、右儿子。

（1）得到的重构树是一个二叉树，共有$2n-1$个结点，其恰有$n$个叶子结点

（2）重构树可视为大根堆

**（3）原图中两点间所有简单路径的最大边权的最小值，等于最小生成树上两点之间边权最大值，等于重构树上两点LCA的点权**

（4）到某个结点简单路径上的最大边权最小值$\le k$的全体结点均在重构树上的某棵子树内，且恰为该子树的叶子结点。

**【例题】**

<span style="color: #7ec0ee;">**【Kruskal重构树】【ST表】CF1706E**</span>

**【题目大意】**连通无向图$|V|=n,|E|=m$，其中边按顺序给出，要求回答$q$个询问，每个询问包含参数$L,R$，输出最小的$k$，使得全体满足$L\le a<b\le R$的整数对$(a,b)$，顶点$a,b$仅使用前$k$条边可以相互到达。

以边的顺序为标准建立Kruskal重构树后，求出顶点$i,i+1$的LCA权值，要求$[L,R]$区域的最小$k$，只需快速求区间最大值，使用$ST$表，总时间复杂度$O(\max(n\log n,q,m))$

<span style="color: #7ec0ee;">**【Kruskal重构树】LuoguP1967/P2245**</span>

无向图$|V|=n,|E|=m$，边权为$w_i$，给出$q$个询问，先判断$x,y$是否连通，连通则求出$x$到$y$所有可能路径中最小边权最大值。

使用并查集判断连通。

方法一：直接套用Kruskal重构树；

方法二：