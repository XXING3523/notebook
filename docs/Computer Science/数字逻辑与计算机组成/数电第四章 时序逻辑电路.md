## 时序逻辑电路概述

**时序逻辑与有限状态机**

**时序逻辑**：输出结果不仅取决于当前时刻输入值，而且**取决于电路过去时刻的行为（当前状态、现态、旧状态）**

- 电路中有**存储元件**，用于存储逻辑信号的值，表示电路过去时刻的行为

**如电视机的音量控制：下一次音量（下一个状态）由原音量（当前状态）和当前所按按钮决定。**

有限状态机，用于刻画状态及状态转换，通常用状态图描述之。

用数字逻辑实现有限状态机的基本操作：

（1）把状态机输入、输出以及**内部状态**转换成**二进制表示**。

（2）设计一种**状态记忆电路（存储元件）**（使用双稳态器件记忆状态，如SR锁存器、D触发器、JK触发器等）

（3）设计状态记忆电路的**激励函数**（**根据当前输入把旧状态改为新状态的函数**）和**输出函数**（**根据旧状态和当前输入来改变电路输出结果的函数**），并完成定时分析。

**时序逻辑电路的基本结构**

时序逻辑电路一般结构：

- **状态记忆模块**：由多个状态记忆单元构成（存储元件）
- **次态激励逻辑模块F** ：激励函数
- **输出逻辑模块G** ：输出函数

电路分为两种类型：**Mealy型**：输出依赖于**当前状态和当前输入信号**；**Moore型**：输出仅依赖于**当前状态**。

根据状态转换方式不同可分为：**同步时序逻辑电路**（**在统一时钟信号控制下进行状态转换**）和异步时序逻辑电路（无统一的时钟信号控制状态改变）。

**时序逻辑电路的定时**

状态变化的两种触发方式：电平触发、边沿触发（上升/下降沿触发）

## 锁存器与触发器

**双稳态原件**：使用两个反相器构建，无法改变电路状态，需要输入信号（激励信号）

**锁存器**：通过**激励输入的电平信号**来控制存储元件的状态

**置位复位锁存器**：具有置位和复位激励信号，Set有效时，强制存储元件输出Q为1，Reset有效时，强制存储元件输出Q为0。

**触发器**：**额外具有时钟控制信号**，通过**时钟信号边沿**触发存储元件改变状态，**在激励信号有效的前提下，必须等到时钟边沿（上升沿/下降沿）到来才能改变状态。**



**SR锁存器**

**D锁存器**

**D触发器**

**T触发器**

## 同步时序电路设计

**同步时序逻辑电路设计步骤**

需求分析$\to$ 设计状态图/表$\to$ 合并等价状态$\to$为状态赋二进制编码$\to$计算得到激励函数、输出函数$\to$分析自启动与挂起



**状态图/状态表设计**

**状态化简和状态编码**

**电路设计和分析**

未用状态分析

**挂起**：电路加电后进入未用状态，且在未用状态之间形成循环转换而**无法进入工作状态**（若时序逻辑电路中的触发器具有预置功能，则可以通过预置处理，使电路进入正常的初始工作状态，避免挂起）

可以利用未用状态无关项进行化简，**但需对所有未用状态进行分析**，若不出现挂起现象且无错误输出，则称电路具有**自启动**能力；否则需调整电路设计。

电路定时分析

## 典型时序逻辑部件设计

**计数器**



**寄存器、寄存器堆**

寄存器可直接由若干个触发器构成。

![第四章2](D:\GIT仓库\notebook\docs\Computer Science\数字逻辑与计算机组成\第四章2.png)

寄存器**通过三态门与总线互连**，任何时刻**至多只能有一个Rout有效**。

![第四章3](D:\GIT仓库\notebook\docs\Computer Science\数字逻辑与计算机组成\第四章3.png)



寄存器堆亦称通用寄存器组。

![第四章1](D:\GIT仓库\notebook\docs\Computer Science\数字逻辑与计算机组成\第四章1.png)

堆内共有$2^k$个寄存器，每个寄存器位数为$n$，RA、RB为两个读口的寄存器编号，RW为写口的寄存器编号。

**读操作为组合逻辑操作**，由RA、RB选择对应寄存器内容送busA、busB、**写操作为时序逻辑操作**，需Clk与WE控制。

??? info"写数据需要保证的前提"
	时钟信号clk到来前，地址RW和写使能WE信号有效，且busW已经稳定一个setup time以上。

**移位寄存器（时序逻辑）**：能实现暂存信息左移/右移功能，通常由时钟信号控制。

**桶形移位器（组合逻辑）**